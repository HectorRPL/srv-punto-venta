<form id="eligeProductoInventariosFrmId" name="eligeProductoInventariosFrm" role="form">
    <div class="row wrapper border-bottom white-bg page-heading">
        <!--TITULO MODAL-->
        <div class="col-sm-10">
            <h2>{{eligeProductoInventarios.marca.nombre}}&nbsp;{{eligeProductoInventarios.producto.campoBusqueda}}&nbsp;
                <small ng-show="eligeProductoInventarios.producto.descontinuado">DESCONTINUADO</small>
                &nbsp;
                <small ng-show="eligeProductoInventarios.producto.importado">IMPORTADO</small>
                &nbsp;
                <small ng-show="eligeProductoInventarios.producto.rectificado">RECTIFICADO</small>
                &nbsp;
            </h2>
        </div>
        <!-- TACHE (CERRAR MODAL)-->
        <div class="col-sm-2">
            <div class="ibox-tools">
                <br>
                <a ng-click="eligeProductoInventarios.cancelarCerrar()"><i class="fa fa-times"></i></a>
            </div>
        </div>
        <!-- BODY MODAL -->
        <div class="wrapper wrapper-content animated fadeInRight">

            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-7 b-r">
                        <h4>Existencia en inventario</h4>
                        <ul class="list-group clear-list m-t">
                            <li class="list-group-item fist-item">
                                <span class="pull-right">
                                    <!--
                                    TODO: Necesita validaciones, especialmente no aceptar nÃºmeros negativos ni cero
                                    -->
                                    <input class="form-control text-navy input-sm"
                                           style="margin-bottom: -5px; margin-top: -5px; text-align: center"
                                           placeholder="Captura cantidad"
                                           type="number"
                                           min="0"
                                           max="5000"
                                           ng-model="eligeProductoInventarios.cantidadSolicitada">
                                </span>
                                <span class="label label-primary">{{eligeProductoInventarios.miInventario.cantidad}}</span>&nbsp;&nbsp;{{eligeProductoInventarios.miInventario.tienda().nombre}}
                            </li>
                        </ul>
                        <existencia-otras-tiendas tiendaid="eligeProductoInventarios.resolve.producto.tiendaId"
                                                  productoid="eligeProductoInventarios.resolve.producto._id"
                                                  productostienda="eligeProductoInventarios.productosTiendas"
                                                  total="eligeProductoInventarios.totalProductosTiendas">
                        </existencia-otras-tiendas>
                        <ul class="list-group clear-list m-t">
                            <li class="list-group-item fist-item">
                                <span class="pull-right label label-info">
                                    <h3>
                                        Total:&nbsp;&nbsp;{{eligeProductoInventarios.cantidadSolicitada +  eligeProductoInventarios.totalProductosTiendas}}
                                    </h3>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-sm-5">
                        <h4>Precios{{eligeProductoInventarios.resolve.producto.iva}}</h4>
                        <ul class="list-group clear-list m-t">
                            <li class="list-group-item">
                                <span class="pull-right label label-success">
                                    <h5>
                                        {{eligeProductoInventarios.miInventario.precioUno() * (1 + (eligeProductoInventarios.resolve.producto.iva/100)) | currency}}
                                    </h5>
                                </span>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="precio" id="precioId"
                                               ng-value="eligeProductoInventarios.miInventario.precioUno()"
                                               ng-model="eligeProductoInventarios.precioFinal" required>
                                        Contado
                                    </label>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <span class="pull-right label label-success">
                                    <h5>
                                        {{eligeProductoInventarios.precioMeses = (eligeProductoInventarios.miInventario.precioUno() * eligeProductoInventarios.mesInteres.factor * (1 + (eligeProductoInventarios.resolve.producto.iva/100))) | currency}}
                                    </h5>
                                </span>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="precio" id="precioId"
                                               ng-value="eligeProductoInventarios.precioMeses"
                                               ng-model="eligeProductoInventarios.precioFinal"
                                               ng-click="eligeProductoInventarios.asignarMeses(eligeProductoInventarios.mesInteres._id)" required>
                                        <elegir-meses-intereses mes="eligeProductoInventarios.mesInteres"></elegir-meses-intereses>
                                    </label>
                                </div>
                            </li>
                            <li class="list-group-item" ng-if="eligeProductoInventarios.miInventario.precioDescuento() > 0">
                                <span class="pull-right label label-success">
                                    <h5>{{eligeProductoInventarios.miInventario.precioDescuento() * (1 + (eligeProductoInventarios.resolve.producto.iva/100)) | currency}}</h5>
                                </span>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="precio" id="precioId"
                                                ng-value="eligeProductoInventarios.miInventario.precioDescuento()"
                                                ng-model="eligeProductoInventarios.precioFinal"
                                                ng-click="eligeProductoInventarios.asignarDescuento(eligeProductoInventarios.miInventario.descuentoPromo())" required>
                                        Promocion {{eligeProductoInventarios.miInventario.descuentoPromo()}}% descuento
                                    </label>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--FOOTER MODAL-->
        <div class="inmodal">
            <!-- BOTON / SIGUIENTE / GUARDAR / GUARDAR-->
            <div class="modal-footer">
                <!--BOTON CERRAR -->
                <button type="button"
                        class="btn btn-default"
                        ng-click="eligeProductoInventarios.cancelarCerrar()">
                    Cancelar
                </button>
                <button type="button"
                        class="btn btn-primary"
                        ng-disabled="eligeProductoInventariosFrm.$invalid
                        || (eligeProductoInventarios.totalProductosTiendas + eligeProductoInventarios.cantidadSolicitada) === 0"
                        ng-click="eligeProductoInventarios.aceptar()">
                    Aceptar
                </button>
            </div>
        </div>
    </div>
</form>